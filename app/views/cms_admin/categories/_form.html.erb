<% object = form.object %>
<% if (categories = Cms::Category.of_type(object.class.to_s)).present? %>
  <%= form.simple_field t('.label'), nil, :class => 'categories' do %>
    <% categories.each do |category| %>
      <%= hidden_field_tag "#{object.class.to_s.demodulize.downcase}[tmp_category_ids][#{category.id}]", 0, :id => nil %>
      <label>
        <%= check_box_tag "#{object.class.to_s.demodulize.downcase}[tmp_category_ids][#{category.id}]", 1, object.categories.member?(category), :id => nil %>
        <%= category.label %>
      </label>
    <% end %>
  <% end %>
<% end %>